:root {
  --bg: #060608; --surface: #0e0f13; --surface2: #16171c; --surface-hover: #1c1d24;
  --border: #232429; --border-light: #2e2f36;
  --primary: #6366f1; --primary-light: #818cf8; --primary-glow: rgba(99,102,241,0.15);
  --accent: #8b5cf6; --accent-glow: rgba(139,92,246,0.15);
  --text: #f0f0f5; --text2: #a1a1b5; --text3: #65657a;
  --danger: #ef4444; --danger-glow: rgba(239,68,68,0.1);
  --success: #22c55e; --warning: #f59e0b;
  --font: 'Inter',system-ui,sans-serif; --mono: 'JetBrains Mono',monospace;
  --radius: 12px; --radius-sm: 8px; --radius-lg: 16px;
  --transition: 0.2s cubic-bezier(0.4,0,0.2,1);
}
[data-theme="light"] {
  --bg: #f5f5f7; --surface: #ffffff; --surface2: #f0f0f3; --surface-hover: #e8e8ed;
  --border: #e0e0e6; --border-light: #d0d0d8;
  --text: #1a1a2e; --text2: #52526a; --text3: #8888a0;
  --primary-glow: rgba(99,102,241,0.1); --accent-glow: rgba(139,92,246,0.08);
  --danger-glow: rgba(239,68,68,0.06);
}
*{box-sizing:border-box;margin:0;padding:0;-webkit-font-smoothing:antialiased}
body{background:var(--bg);color:var(--text);font-family:var(--font);height:100vh;overflow:hidden;display:flex;transition:background .3s,color .3s}
::-webkit-scrollbar{width:5px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
.hidden{display:none!important}
button{font-family:var(--font)}

/* AUTH */
#auth-screen{position:fixed;inset:0;z-index:1000;display:flex;align-items:center;justify-content:center;
  background:#000 radial-gradient(ellipse at 50% 0%,rgba(99,102,241,0.15),transparent 70%)}
[data-theme="light"] #auth-screen{background:#f0f0f5 radial-gradient(ellipse at 50% 0%,rgba(99,102,241,0.1),transparent 70%)}
.auth-box{width:400px;padding:40px;border-radius:24px;background:rgba(14,15,19,0.8);border:1px solid rgba(255,255,255,0.06);
  backdrop-filter:blur(40px);text-align:center;animation:fadeUp .6s ease-out}
[data-theme="light"] .auth-box{background:rgba(255,255,255,0.85);border-color:rgba(0,0,0,0.08)}
.auth-logo{font-size:1.8rem;font-weight:700;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;color:transparent;margin-bottom:4px}
.auth-sub{font-size:.7rem;color:var(--text3);margin-bottom:28px;letter-spacing:2px;text-transform:uppercase}
.input-wrap{margin-bottom:14px}
.input-field{width:100%;background:var(--bg);border:1px solid var(--border);padding:13px 16px;border-radius:var(--radius);
  color:var(--text);font-size:.9rem;transition:var(--transition);outline:none}
.input-field:focus{border-color:var(--primary);box-shadow:0 0 0 3px var(--primary-glow)}
.btn-primary{width:100%;padding:13px;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;
  border:none;border-radius:var(--radius);font-weight:600;cursor:pointer;font-size:.95rem;transition:var(--transition);margin-top:8px}
.btn-primary:hover{transform:translateY(-1px);box-shadow:0 8px 24px var(--primary-glow)}
.auth-err{color:var(--danger);margin-top:12px;font-size:.8rem;min-height:1.2rem}

/* APP */
#app{width:100%;height:100%;display:none}

/* SIDEBAR */
#sidebar{width:240px;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;
  padding:16px 10px;transition:var(--transition);flex-shrink:0}
.sb-brand{font-size:1.2rem;font-weight:700;padding:4px 14px 18px;display:flex;align-items:center;gap:8px}
.sb-brand span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;color:transparent}
.sb-section{font-size:.65rem;color:var(--text3);text-transform:uppercase;letter-spacing:1.5px;padding:12px 14px 6px;font-weight:600}
.nav-item{display:flex;align-items:center;gap:10px;padding:10px 14px;color:var(--text2);border-radius:var(--radius-sm);
  cursor:pointer;font-size:.85rem;font-weight:500;transition:var(--transition);margin-bottom:2px}
.nav-item:hover{background:var(--surface-hover);color:var(--text)}
.nav-item.active{background:var(--primary-glow);color:var(--primary-light)}
.nav-item i{font-size:1.1rem;width:20px;text-align:center}
.nav-item .badge{margin-left:auto;background:var(--danger);color:#fff;font-size:.65rem;padding:2px 6px;border-radius:10px;font-weight:600}
.sb-bottom{margin-top:auto;padding-top:12px;border-top:1px solid var(--border)}
.theme-toggle{display:flex;align-items:center;gap:10px;padding:10px 14px;color:var(--text2);border-radius:var(--radius-sm);
  cursor:pointer;font-size:.85rem;transition:var(--transition)}
.theme-toggle:hover{background:var(--surface-hover);color:var(--text)}
.user-card{padding:10px;background:var(--bg);border:1px solid var(--border);border-radius:var(--radius);
  display:flex;align-items:center;gap:10px;margin-top:8px}
.avatar{width:30px;height:30px;background:linear-gradient(135deg,var(--primary),var(--accent));border-radius:50%;
  display:grid;place-items:center;font-weight:700;font-size:.75rem;color:#fff;flex-shrink:0}
.user-email{font-size:.7rem;color:var(--text3);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:120px}
.logout-btn{background:none;border:none;color:var(--text3);cursor:pointer;font-size:1.1rem;margin-left:auto;transition:var(--transition)}
.logout-btn:hover{color:var(--danger)}

/* MAIN */
#main{flex:1;display:flex;flex-direction:column;position:relative;overflow:hidden}

/* TOPBAR */
.topbar{height:54px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;
  padding:0 20px;background:var(--surface);flex-shrink:0}
.topbar-left{display:flex;align-items:center;gap:8px;font-size:.85rem;color:var(--text2)}
.topbar-left i{cursor:pointer;transition:var(--transition)}
.topbar-left i:hover{color:var(--primary)}
.topbar-left .crumb{color:var(--text);font-weight:500}
.topbar-right{display:flex;align-items:center;gap:6px}
.icon-btn{width:34px;height:34px;border-radius:var(--radius-sm);display:grid;place-items:center;background:var(--surface2);
  border:1px solid var(--border);color:var(--text2);cursor:pointer;transition:var(--transition);font-size:1rem}
.icon-btn:hover{color:var(--text);border-color:var(--primary);background:var(--primary-glow)}
.icon-btn.active{color:var(--primary);border-color:var(--primary)}
.view-toggle{display:flex;border:1px solid var(--border);border-radius:var(--radius-sm);overflow:hidden;margin-right:4px}
.view-toggle button{background:var(--surface2);border:none;color:var(--text3);padding:6px 10px;cursor:pointer;transition:var(--transition);font-size:.85rem}
.view-toggle button.active{background:var(--primary-glow);color:var(--primary)}
.sort-select{background:var(--surface2);border:1px solid var(--border);color:var(--text2);padding:6px 10px;
  border-radius:var(--radius-sm);font-size:.8rem;cursor:pointer;outline:none}

/* DRIVE VIEW */
.drive-area{flex:1;overflow-y:auto;padding:20px}
.drive-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(130px,1fr));gap:12px}
.drive-list{display:flex;flex-direction:column;gap:2px}
.file-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:16px 12px;
  display:flex;flex-direction:column;align-items:center;gap:10px;cursor:pointer;transition:var(--transition);position:relative}
.file-card:hover{transform:translateY(-2px);border-color:var(--primary);box-shadow:0 8px 24px rgba(0,0,0,.2)}
.file-card .fi{font-size:2.2rem}
.file-card .fn{font-size:.75rem;color:var(--text2);text-align:center;word-break:break-all;line-height:1.3}
.file-card.list-item{flex-direction:row;padding:10px 16px;gap:12px;border-radius:var(--radius-sm)}
.file-card.list-item .fi{font-size:1.3rem}
.file-card.list-item .fn{text-align:left;flex:1}
.file-card.list-item .fmeta{font-size:.7rem;color:var(--text3)}
.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;height:60%;color:var(--text3);gap:12px}
.empty-state i{font-size:3rem;opacity:.3}
.empty-state p{font-size:.9rem}

/* DRAG DROP */
.drop-zone{position:absolute;inset:0;background:rgba(99,102,241,.9);z-index:500;display:flex;align-items:center;
  justify-content:center;color:#fff;font-size:1.2rem;font-weight:600;opacity:0;pointer-events:none;transition:.3s;border-radius:var(--radius)}
body.dragging .drop-zone{opacity:1;pointer-events:all}

/* NOTES VIEW */
#view-notes{display:flex;height:100%}
.notes-sidebar{width:280px;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;flex-shrink:0}
.notes-head{padding:16px;border-bottom:1px solid var(--border);display:flex;flex-direction:column;gap:10px}
.notes-head-top{display:flex;justify-content:space-between;align-items:center}
.notes-head-top h3{font-size:.95rem;font-weight:600}
.notes-search{width:100%;background:var(--bg);border:1px solid var(--border);padding:9px 12px;border-radius:var(--radius-sm);
  color:var(--text);font-size:.8rem;outline:none;transition:var(--transition)}
.notes-search:focus{border-color:var(--primary)}
#notes-list{overflow-y:auto;flex:1}
.note-item{padding:14px 16px;border-bottom:1px solid var(--border);cursor:pointer;transition:var(--transition)}
.note-item:hover{background:var(--surface-hover)}
.note-item.active{background:var(--primary-glow);border-left:3px solid var(--primary)}
.note-item .nt{font-weight:600;font-size:.85rem;margin-bottom:3px;display:flex;justify-content:space-between;align-items:center}
.note-item .np{font-size:.75rem;color:var(--text3);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.note-item .nm{font-size:.65rem;color:var(--text3);margin-top:4px}

/* EDITOR */
.editor-area{flex:1;display:flex;flex-direction:column;position:relative}
.editor-bar{padding:8px 20px;border-bottom:1px solid var(--border);display:flex;gap:6px;align-items:center;
  background:var(--surface);flex-shrink:0}
.tool-btn{background:none;border:none;color:var(--text3);cursor:pointer;padding:6px;border-radius:4px;transition:var(--transition);font-size:.95rem}
.tool-btn:hover{color:var(--text);background:var(--surface2)}
.tool-sep{width:1px;height:18px;background:var(--border);margin:0 4px}
.editor-info{margin-left:auto;font-size:.7rem;color:var(--text3);font-family:var(--mono);display:flex;gap:12px}
.save-dot{width:6px;height:6px;border-radius:50%;background:var(--success);display:inline-block;margin-right:4px}
#note-title{background:none;border:none;color:var(--text);font-size:1.6rem;font-weight:700;padding:24px 32px 8px;width:100%;outline:none}
#note-body{flex:1;background:none;border:none;color:var(--text);font-size:.95rem;line-height:1.85;padding:0 32px 32px;
  resize:none;outline:none;font-family:var(--font)}
#note-body::placeholder{color:var(--text3)}

/* LOCKED */
.lock-screen{position:absolute;inset:0;background:var(--bg);display:flex;flex-direction:column;align-items:center;
  justify-content:center;z-index:10;gap:12px}
.lock-screen i{font-size:2.5rem;color:var(--text3)}
.lock-screen h2{font-size:1.1rem;color:var(--text2)}

/* TRASH VIEW */
.trash-list{padding:20px;overflow-y:auto;flex:1}
.trash-item{display:flex;align-items:center;gap:12px;padding:12px 16px;border:1px solid var(--border);border-radius:var(--radius-sm);
  margin-bottom:8px;background:var(--surface);transition:var(--transition)}
.trash-item:hover{border-color:var(--border-light)}
.trash-item .ti{font-size:1.2rem;color:var(--text3)}
.trash-item .tn{flex:1;font-size:.85rem}
.trash-item .td{font-size:.7rem;color:var(--text3)}
.trash-item button{background:none;border:none;color:var(--text3);cursor:pointer;padding:4px;font-size:1rem;transition:var(--transition)}
.trash-item button:hover{color:var(--primary)}
.trash-item button.del:hover{color:var(--danger)}

/* CONTEXT MENU */
.ctx-menu{position:fixed;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-sm);
  width:180px;box-shadow:0 12px 40px rgba(0,0,0,.4);z-index:2000;padding:4px;animation:fadeUp .1s ease}
[data-theme="light"] .ctx-menu{box-shadow:0 12px 40px rgba(0,0,0,.1)}
.ctx-item{padding:8px 12px;font-size:.8rem;color:var(--text2);cursor:pointer;border-radius:4px;display:flex;gap:8px;align-items:center;transition:var(--transition)}
.ctx-item:hover{background:var(--primary);color:#fff}
.ctx-item.danger:hover{background:var(--danger)}

/* MODAL */
.modal-bg{position:fixed;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(4px);z-index:3000;
  display:flex;align-items:center;justify-content:center}
.modal{width:380px;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-lg);
  padding:24px;box-shadow:0 24px 48px rgba(0,0,0,.4);animation:fadeUp .25s ease}
[data-theme="light"] .modal{box-shadow:0 24px 48px rgba(0,0,0,.1)}
.modal h3{margin-bottom:14px;font-size:1rem;font-weight:600}
.modal input,.modal select{width:100%;background:var(--bg);border:1px solid var(--border);padding:10px 12px;
  border-radius:var(--radius-sm);color:var(--text);margin-bottom:12px;outline:none;font-size:.85rem}
.modal-btns{display:flex;justify-content:flex-end;gap:8px}
.btn-ghost{background:transparent;border:1px solid var(--border);color:var(--text2);padding:8px 16px;border-radius:var(--radius-sm);cursor:pointer;font-size:.85rem;transition:var(--transition)}
.btn-ghost:hover{border-color:var(--text3)}
.btn-accent{background:var(--primary);border:none;color:#fff;padding:8px 16px;border-radius:var(--radius-sm);cursor:pointer;font-size:.85rem;transition:var(--transition)}
.btn-accent:hover{background:var(--primary-light)}

/* TOAST */
#toast{position:fixed;bottom:24px;right:24px;background:var(--surface);border:1px solid var(--border);
  padding:12px 18px;border-radius:var(--radius);color:var(--text);display:flex;align-items:center;gap:8px;
  box-shadow:0 12px 32px rgba(0,0,0,.3);transform:translateY(80px);opacity:0;transition:.3s cubic-bezier(.16,1,.3,1);z-index:5000;font-size:.85rem}
#toast.show{transform:translateY(0);opacity:1}

/* LOADER */
#loader{position:fixed;inset:0;background:var(--bg);z-index:9999;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:16px;transition:opacity .5s}
.spinner{width:32px;height:32px;border:2px solid var(--border);border-top-color:var(--primary);border-radius:50%;animation:spin .8s infinite linear}

/* ANIMATIONS */
@keyframes fadeUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
